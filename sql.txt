CREATE TABLE users(
	username VARCHAR(50) NOT NULL,
	password VARCHAR(100) NOT NULL,
	enabled TINYINT NOT NULL DEFAULT 1,
	PRIMARY KEY (username)
);

CREATE TABLE authorities (
	username VARCHAR(50) NOT NULL,
	authority VARCHAR(50) NOT NULL,
	FOREIGN KEY (username) REFERENCES users(username)
);

CREATE UNIQUE INDEX ix_auth_username
	on authorities(username,authority);



INSERT INTO users(username, password, enabled)
	values('fox', '$2a$10$AP1.FyoRVm4jzxpfxMtX5uA7s3M3lpyPFv2EsLEOQZzL08hjswAti', 1);

INSERT INTO authorities(username, authority)
	values('fox', 'ROLE_USER');



ALTER TABLE users
	ADD COLUMN nickname VARCHAR(50) NOT NULL;

CREATE TABLE persistent_logins(
	username VARCHAR(50) NOT NULL,
	series VARCHAR(64) PRIMARY KEY,
	token VARCHAR(64) NOT NULL,
	last_used TIMESTAMP NOT NULL,
	FOREIGN KEY (username) REFERENCES users(username)
);

CREATE TABLE accounts(
	username VARCHAR(50) NOT NULL,
	password VARCHAR(100) NOT NULL,
	email VARCHAR(100) NOT NULL,
	firstname VARCHAR(50) NOT NULL,
	lastname VARCHAR(50) NOT NULL,
	PRIMARY KEY (username)
);
